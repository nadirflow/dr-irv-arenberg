/**
 * ZiniAppBuilder Wordpress Plugin for Mobile App.
 * Exclusively on Envato Market: https://codecanyon.net/user/zinisoft/portfolio
 *
 * @encoding        UTF-8
 * @version         1.0.0
 * @copyright       Copyright (C) 2018 - 2019 ZiniSoft ( https://zinisoft.net/ ). All rights reserved.
 * @license         Envato License https://1.envato.market/KYbje
 * @contributors    Brian Vo (info@zinisoft.net), ZiniSoft Team (support@zinisoft.net)
 * @support         support@zinisoft.net
 **/
!function(e){"use strict";e(document).ready((function(){let t=!1;document.body.classList.contains("block-editor-page")&&!document.body.classList.contains("vc_editor")&&wp.data.subscribe((function(){if(wp.data.select("core/editor")){var s=wp.data.select("core/editor").isSavingPost(),a=wp.data.select("core/editor").isAutosavingPost();s&&!a&&(e(".zs-warning").length&&e(".zs-warning").replaceWith('<div class="components-panel__row"><button id="zs_ziniappbuilder_generate" type="button" class="button-large components-button is-button is-primary is-large">Create audio</button></div>'),t=!1)}})),e(":input").on("change",(function(){t=!0})),e(document).on("click","#zs_ziniappbuilder_generate",(function(){if(!e(this).hasClass("is-busy")){var s=!1;if(document.body.classList.contains("block-editor-page")&&wp.data.select("core/editor")&&wp.data.select("core/editor").isEditedPostDirty()&&(s=!0),!t&&!s||confirm("It looks like you made changes and did not save it. Continue anyway?")){e(this).addClass("is-busy").attr("disabled",!0);var a={action:"gtts",security:zs_ziniappbuilder.ajax_nonce,post_id:zs_ziniappbuilder.post_id};e.post(ajaxurl,a,(function(e){e.success?location.reload():o(e)})).fail((function(e){o(e)})).always((function(){e("#zs_ziniappbuilder_generate").removeClass("is-busy").attr("disabled",!1)}))}}function o(e){console.log(e),e.message?alert("ERROR:\n "+e.message):e.responseText?alert("ERROR:\n "+e.responseText):alert("ERROR:\n "+e)}})),e(document).on("click","#zs_ziniappbuilder_remove",(function(){if(!e(this).hasClass("is-busy")&&confirm("Are you sure you want to delete the audio version of this post?")){e(this).addClass("is-busy").attr("disabled",!0);var t={action:"remove_audio",security:zs_ziniappbuilder.ajax_nonce,post_id:zs_ziniappbuilder.post_id};e.post(ajaxurl,t,(function(e){"ok"==e&&location.reload()})).fail((function(){alert("error")})).always((function(){e("#zs_ziniappbuilder_generate").removeClass("is-busy").attr("disabled",!1)}))}}))}))}(jQuery);